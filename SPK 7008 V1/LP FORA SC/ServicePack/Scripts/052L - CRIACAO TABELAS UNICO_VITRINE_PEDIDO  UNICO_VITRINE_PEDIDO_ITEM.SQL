IF NOT EXISTS (SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_NAME = 'UNICO_VITRINE_PEDIDO')
BEGIN 
CREATE TABLE [dbo].[UNICO_VITRINE_PEDIDO](
	[ID_PEDIDO] [int] IDENTITY(1,1)			NOT NULL,
	[CODIGO_FILIAL] [char](6)				NOT NULL,
	[TICKET] [char](8)						NOT NULL,
	[DATA_VENDA] [datetime]					NOT NULL,
	[PEDIDO] [varchar](50)				    NOT NULL,
	[CODIGO_CLIENTE] [varchar](14)          NULL,
	[NSU] [varchar](16)                     NULL,
	[VALOR_ORIGINAL_PEDIDO] [numeric](9, 2) NOT NULL,
	[DESCONTO_LOJA] [numeric](9, 2)         NOT NULL,
	[CONFIRMADO] [bit]                      NOT NULL,
	[CANCELADO] [bit]                       NOT NULL,
	[FRETE] [numeric](9, 2)                 NULL,
	[DATA_PARA_TRANSFERENCIA] [datetime]    NULL,
 CONSTRAINT [PK_UNICO_VITRINE_PEDIDO] PRIMARY KEY CLUSTERED 
(
	[ID_PEDIDO] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
END 

IF NOT EXISTS (SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_NAME = 'UNICO_VITRINE_PEDIDO_ITEM')
BEGIN 
CREATE TABLE [dbo].[UNICO_VITRINE_PEDIDO_ITEM](
	[ID_PEDIDO_ITEM] [int] IDENTITY(1,1) NOT NULL,
	[ID_PEDIDO] [int]                    NOT NULL,
	[CODIGO_BARRA] [varchar](25)         NOT NULL,
	[QTDE] [int]                         NOT NULL,
	[PRECO_UNITARIO] [numeric](9, 2)     NOT NULL,
	[VENDEDOR] [char](4)                 NULL,
	[DESCONTO] [numeric](9, 2)           NULL,
	[DATA_PARA_TRANSFERENCIA] [datetime] NULL,
 CONSTRAINT [PK_UNICO_VITRINE_PEDIDO_ITEM] PRIMARY KEY CLUSTERED 
(
	[ID_PEDIDO_ITEM] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]

ALTER TABLE [dbo].[UNICO_VITRINE_PEDIDO_ITEM]  WITH CHECK ADD FOREIGN KEY([ID_PEDIDO])
REFERENCES [dbo].[UNICO_VITRINE_PEDIDO] ([ID_PEDIDO])
ON DELETE CASCADE

END


IF NOT EXISTS(	SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS 
				WHERE TABLE_NAME = 'UNICO_VITRINE_PEDIDO' AND COLUMN_NAME = 'DATA_PARA_TRANSFERENCIA' )
	ALTER TABLE UNICO_VITRINE_PEDIDO ADD DATA_PARA_TRANSFERENCIA DATETIME NULL
